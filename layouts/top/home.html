{{ define "title" }}
{{ .Site.Title -}}{{ i18n "site.subtitle" }}
{{ end }}

{{ define "page/styles" }}
{{ partial "site/pageStyle" "css/home.css" }}
{{ end }}

{{ define "main" }}

<section id="videos">
  {{ range where .Pages "Section" "videos" }}

  {{ range first 1 (where .Pages "Params.featured" true) }}
  {{ block "videos/hero" .}}{{ partial "videos/hero.html" . }}{{ end }}
  {{ end }}

  <div class="video-grid-section">

    <div class="video-grid">
      {{ range where .Pages "Params.featured" "!=" true }}
      {{ block "videos/list" .}}{{ partial "videos/list.html" . }}{{ end }}
      {{ end }}
    </div>

  </div>

  {{ end }}
</section>

<section id="team" class="padding">
  <h2 class="title">{{ i18n "home.core_team" }}</h2>
  {{ range where .Pages "Section" "team" }}

  <div class="team-grid">
    {{ range .Pages.ByParam "order" }}

    {{ block "team/member" . }}{{ partial "team/member.html" . }}{{ end }}

    {{ end }}
  </div>

  {{ end }}
</section>

<section id="clients" class="padding">
  <h2 class="title">{{ i18n "clients.title" }}</h2>
  <h4 class="sub-title">{{ i18n "clients.text" }}</h4>

  {{ block "clients/grid" . }}{{ partial "clients/grid.html" . }}{{ end }}

</section>

<div id="overlay">
  <div class="close">
    <span>
      Close
    </span>
    <svg viewBox="0 0 24 24" alt="Close Modal">
      <use href="/assets/close.svg#icon"></use>
    </svg>
  </div>
  <div id="player"></div>
</div>


{{ $defines := dict "process.env.NODE_ENV" `"process.env.HUGO_ENVIRONMENT"` }}
{{ $opts := dict "targetPath" "home.js" "defines" $defines }}
{{ $s := resources.Get "js/home/index.ts" | js.Build $opts }}

<script src="{{ $s.RelPermalink }}" defer></script>

{{ end }}
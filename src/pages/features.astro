---
import { getCollection, render } from "astro:content"
import FeatureCard from "../components/FeatureCard.astro"
import DefaultLayout from "../layouts/DefaultLayout.astro"
import featuresConfig from "../content/features.json"
import { kebabCase } from "lodash-es"

const features = (
  await getCollection("videos", ({ id }) =>
    featuresConfig.videos.includes(kebabCase(id.replace(".md", ""))),
  )
).sort((a, b) => b.data.publishDate.valueOf() - a.data.publishDate.valueOf())
---

<DefaultLayout>
  <section class="mx-auto w-container py-8 md:py-14">
    <h1 class="mx-auto max-w-7xl py-4 md:py-16">Features</h1>
    <div
      class="mx-auto grid max-w-7xl snap-y snap-mandatory grid-flow-row grid-cols-1 gap-14 overflow-y-auto py-10"
    >
      {features.map(async (feature) => <FeatureCard {...feature} />)}
    </div>
  </section>
</DefaultLayout>

---
import type { ImageMetadata } from "astro"
import VideoCard from "./VideoCard.tsx"
import { getCollection } from "astro:content"

const videos = await getCollection("videos")

const images: Record<string, { default: ImageMetadata }> = import.meta.glob(
  "../images/*.{jpg,jpeg,png}",
  { eager: true },
)

function getImageUrl(image: string) {
  const key = Object.keys(images).find((key) => key.includes(image))
  if (!key) return ""
  return images[key]?.default?.src || ""
}
---

<section class="grid grid-cols-[24px_1fr_24px] w-full overflow-x-scroll snap-x">
  <div
    style="grid-column: 2;"
    class="grid grid-rows-3 grid-flow-col gap-6 py-3"
  >
    {
      videos.map((video) => (
        <VideoCard
          {...video.data}
          image={getImageUrl(video.data.image)}
          client:idle
        />
      ))
    }

    <!-- <div class="scroll-arrows">
      <span class="arrow-left page-number">
        <svg viewBox="0 0 24 24">
          <use href="/assets/arrow-left.svg#icon"></use>
        </svg>
      </span>
      <span class="arrow-right page-number">
        <svg viewBox="0 0 24 24">
          <use href="/assets/arrow-right.svg#icon"></use>
        </svg>
      </span>
    </div> -->
  </div>
</section>
